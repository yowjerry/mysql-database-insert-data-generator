<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Bootstrap demo</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
</head>

<body>
    <div class="container">
        <div class="row">
            <div class="col-3">
                <label for="table_name">Table Name</label>
                <input type="text" id="table_name" class="form-control">
            </div>
        </div>
        <div class="row">
            <table class="table">
                <thead>
                    <tr>
                        <th scope="col">#</th>
                        <th scope="col">Row Name</th>
                        <th scope="col">Type/values</th>
                        <th scope="col">max-lenght/max-value</th>
                        <!-- <th scope="col">null</th> -->
                    </tr>
                </thead>
                <tbody id="table_rows_info">
                    <tr class="mysql_table_rows">
                        <th scope="row">1</th>
                        <td><input value="id" class="form-control" placeholder="Insert Row Name e.g : Product"
                                type="text"></td>
                        <td><select class="form-control" name="" id="">
                                <option value=1>Auto-Increment</option>
                                <option value=2>Number</option>
                                <option value=3>Phone</option>
                                <option value=4>Name</option>
                                <option value=5>Short Text</option>
                                <option value=6>Paragraph</option>
                                <option value=7>Date</option>
                                <option value=8>Datetime</option>
                                <option value=9>Price</option>
                                <option value=10>Address</option>
                                <option value=11>Alphanumeric</option>
                            </select></td>
                        <td><input class="form-control" type="number" value="1"></td>
                        <!-- <td><input type="checkbox" name="" id=""></td> -->
                    </tr>
                </tbody>
                <tfoot>
                    <tr>
                        <td class="border-bottom-0"><button onclick="new_row()" type="button"
                                class="btn btn-secondary">New Row</button></td>
                    </tr>
                </tfoot>
            </table>
        </div>
        <div class="row">
            <input type="number" class="form-control" id="number_of_rows" placeholder="number of row">
        </div>
        <div class="row">
            <button type="button" onclick="generate_mysql_code()" class="btn btn-success">Generate MySql Code</button>
        </div>
        <div class="row">
            <textarea id="sql_code" class="form-control" cols="30" rows="50"></textarea>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
        crossorigin="anonymous"></script>
    <script src="dataGenerator.js"></script>
    <script>
        let clones = 1;
        let auto_increment = 1;
        function new_row() {
            clones++;
            var clone = document.getElementsByClassName("mysql_table_rows")[0].cloneNode(true);
            clone.children[0].innerText = clones;
            clone.children[1].children[0].value = "";
            clone.children[2].children[0].value = 1;
            clone.children[3].children[0].value = 1;
            document.getElementById("table_rows_info").appendChild(clone);
        }
        function generate_mysql_code() {
            var sqlString = "";
            var tablename = document.getElementById("table_name").value;
            var code_element = document.getElementById("sql_code");
            var table_rows = document.getElementById("table_rows_info").children;
            var number_of_rows = parseInt(document.getElementById("number_of_rows").value);
            var random_phones=shuffleArray(phones);
            var random_names=shuffleArray(names);
            var random_addresses=shuffleArray(addresses);
            for (var rows_count = 0; rows_count < number_of_rows; rows_count++) {
                auto_increment = rows_count + 1;
                sqlString += "insert into " + tablename + "(";
                values = "("
                for (var i = 0; i < table_rows.length; i++) {
                    sqlString += table_rows[i].children[1].children[0].value;
                    switch (table_rows[i].children[2].children[0].value) {
                        case "1":
                            values += auto_increment.toString();
                            break;
                        case "2":
                            values += generateNumber(100);
                            break;
                        case "3":
                            values += "'" + random_phones[rows_count] + "'";
                            break;
                        case "4":
                            values += "\"" + random_names[rows_count] + "\"";
                            break;
                        case "5":
                            values += "'" + generateShortText() + "'";
                            break;
                        case "6":
                            values += "'" + generateText(2) + "'";
                            break;
                        case "7":
                            values += "'" + generateDate() + "'";
                            break;
                        case "8":
                            values += "'" + generateDate(true) + "'";
                            break;
                        case "9":
                            values +=generatePrice(99);
                            break;
                        case "10":
                            values +="'"+random_addresses[rows_count]+"'";
                            break;
                        case "11":
                            values+="'"+randomAlphanumeric()+"'";
                            break;
                    }
                    if (i + 1 < table_rows.length) {
                        sqlString += ",";
                        values += ",";
                    }
                }
                sqlString += ") values " + values + "); ";
                code_element.value = sqlString;
            }

        }
    </script>
</body>

</html>